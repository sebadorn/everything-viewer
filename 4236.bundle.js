"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[4236],{34236:(n,e,t)=>{t.r(e),t.d(e,{AnimationPropertyInfo:()=>u,TransformNodeAnimationPropertyInfo:()=>m,WeightAnimationPropertyInfo:()=>h,getQuaternion:()=>s,getVector3:()=>r,getWeights:()=>l});var o=t(7540),i=t(79923),a=t(49532);function r(n,e,t,o){return i.Pq.FromArray(e,t).scaleInPlace(o)}function s(n,e,t,o){return i.PT.FromArray(e,t).scaleInPlace(o)}function l(n,e,t,o){const i=new Array(n._numMorphTargets);for(let n=0;n<i.length;n++)i[n]=e[t++]*o;return i}class u{constructor(n,e,t,o){this.type=n,this.name=e,this.getValue=t,this.getStride=o}_buildAnimation(n,e,t){const i=new o.X5(n,this.name,e,this.type);return i.setKeys(t),i}}class m extends u{buildAnimations(n,e,t,o){const i=[];return i.push({babylonAnimatable:n._babylonTransformNode,babylonAnimation:this._buildAnimation(e,t,o)}),i}}class h extends u{buildAnimations(n,e,t,i){const a=[];if(n._numMorphTargets)for(let r=0;r<n._numMorphTargets;r++){const s=new o.X5(`${e}_${r}`,this.name,t,this.type);if(s.setKeys(i.map(n=>({frame:n.frame,inTangent:n.inTangent?n.inTangent[r]:void 0,value:n.value[r],outTangent:n.outTangent?n.outTangent[r]:void 0,interpolation:n.interpolation}))),n._primitiveBabylonMeshes)for(const e of n._primitiveBabylonMeshes)if(e.morphTargetManager){const n=e.morphTargetManager.getTarget(r),t=s.clone();n.animations.push(t),a.push({babylonAnimatable:n,babylonAnimation:t})}}return a}}(0,a.ZU)("/nodes/{}/translation",[new m(o.X5.ANIMATIONTYPE_VECTOR3,"position",r,()=>3)]),(0,a.ZU)("/nodes/{}/rotation",[new m(o.X5.ANIMATIONTYPE_QUATERNION,"rotationQuaternion",s,()=>4)]),(0,a.ZU)("/nodes/{}/scale",[new m(o.X5.ANIMATIONTYPE_VECTOR3,"scaling",r,()=>3)]),(0,a.ZU)("/nodes/{}/weights",[new h(o.X5.ANIMATIONTYPE_FLOAT,"influence",l,n=>n._numMorphTargets)])}}]);