"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[5302],{45302:(e,i,t)=>{t.d(i,{EXT_lights_ies:()=>_});var s=t(14037),n=t(26041),l=t(40136),a=t(64704),o=t(98556),r=t(37812),h=t(82781);const d="EXT_lights_ies";class _{constructor(e){this.name=d,this._loader=e,this.enabled=this._loader.isExtensionUsed(d)}dispose(){this._loader=null,delete this._lights}onLoading(){const e=this._loader.gltf.extensions;if(e&&e[this.name]){const i=e[this.name];this._lights=i.lights,o.l2.Assign(this._lights)}}loadNodeAsync(e,i,t){return o.BT.LoadExtensionAsync(e,i,this.name,async(r,d)=>{let _,c;this._loader._allMaterialsDirtyRequired=!0;const f=await this._loader.loadNodeAsync(e,i,e=>{c=o.l2.Get(r,this._lights,d.light);const i=c.name||e.name;this._loader.babylonScene._blockEntityCollection=!!this._loader._assetContainer,_=new l.n(i,s.Pq.Zero(),s.Pq.Backward(),0,1,this._loader.babylonScene),_.angle=Math.PI/2,_.innerAngle=0,_._parentContainer=this._loader._assetContainer,this._loader.babylonScene._blockEntityCollection=!1,c._babylonLight=_,_.falloffType=a.v.FALLOFF_GLTF,_.diffuse=d.color?n.v9.FromArray(d.color):n.v9.White(),_.intensity=d.multiplier||1,_.range=Number.MAX_VALUE,_.parent=e,this._loader._babylonLights.push(_),o.BT.AddPointerMetadata(_,r),t(e)});let u;if(c.uri)u=await this._loader.loadUriAsync(e,c,c.uri);else{const i=o.l2.Get(`${e}/bufferView`,this._loader.gltf.bufferViews,c.bufferView);u=await this._loader.loadBufferViewAsync(`/bufferViews/${i.index}`,i)}return _.iesProfileTexture=new h.g(name+"_iesProfile",this._loader.babylonScene,!0,!1,void 0,null,null,u,!0,void 0,void 0,void 0,void 0,".ies"),f})}}(0,r.Hg)(d),(0,r.Ye)(d,!0,e=>new _(e))}}]);