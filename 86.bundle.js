(()=>{var e,t,r={4218:(e,t,r)=>{"use strict";var n=r(4670),a=r(1587),o=r(4590),s=r(1625),i=r(9849),c=r(5565),l=r(2812),p=r(4602),u=r(38),f=r(1069),g=r(5202),d=r(7649),m=r(7933),b=r(7416),h=r(678),y=r(7092);const v={bilinear:n.A,replicate:a.A},w={Uint8Array,Uint16Array,Int16Array,Float32Array};function S(e,t,r,n){const a=void 0!==e.pixelRepresentation&&1===e.pixelRepresentation,o=a&&void 0!==e.bitsStored?32-e.bitsStored:void 0;if(a&&void 0!==o)for(let t=0;t<e.pixelData.length;t++)e.pixelData[t]=e.pixelData[t]<<o>>o;let s=e.pixelData;e.pixelDataLength=e.pixelData.length;const{min:i,max:c}=(0,b.A)(e.pixelData),l=void 0===t.allowFloatRendering||t.allowFloatRendering;let p=(0,y.A)(e.photometricInterpretation)&&void 0===t.targetBuffer?.offset;const u=t.preScale?.enabled,f=u&&Object.values(t.preScale.scalingParameters).some((e=>"number"==typeof e&&!Number.isInteger(e))),g=!t.preScale.enabled||!l&&f,d=t.targetBuffer?.type;if(d&&t.preScale.enabled&&!g){const{rescaleSlope:e,rescaleIntercept:r}=t.preScale.scalingParameters,n=e*i+r,a=e*c+r;p=!(0,h.r)(n,a,d)}s=d&&!p?function(e,t,r,n){const{arrayBuffer:a,type:o,offset:s=0,length:i,rows:c}=e.targetBuffer,l=r[o];if(!l)throw new Error(`target array ${o} is not supported, or doesn't exist.`);c&&c!=t.rows&&function(e,t,r){const n=function(e,t,r){const{samplesPerPixel:n}=e,{rows:a,columns:o}=t,s=a*o*n,i=new r(s),c=i.byteLength/s;return{pixelData:i,rows:a,columns:o,frameInfo:{...e.frameInfo,rows:a,columns:o},imageInfo:{...e.imageInfo,rows:a,columns:o,bytesPerPixel:c}}}(e,t,r),{scalingType:a="replicate"}=t;v[a](e,n),Object.assign(e,n),e.pixelDataLength=e.pixelData.length}(t,e.targetBuffer,l);const p=t.pixelDataLength,u=s,f=null!=i?i:p-u,g=t.pixelData;if(f!==g.length)throw new Error(`target array for image does not have the same length (${f}) as the decoded image length (${g.length}).`);const d=a?new l(a,u,f):new l(f);return d.set(g,0),n=d,n}(t,e,w,s):t.preScale.enabled&&!g?function(e,t,r,n){const a=e.preScale.scalingParameters;A(a);const{rescaleSlope:o,rescaleIntercept:s}=a;let i=t,c=r;"number"==typeof o&&"number"==typeof s&&(i=o*t+s,c=o*r+s);return x(i,c,n)}(t,i,c,e):x(i,c,e);let S=i,E=c;if(t.preScale.enabled&&!g){const r=t.preScale.scalingParameters;A(r);const{rescaleSlope:n,rescaleIntercept:a}=r;if("number"==typeof n&&"number"==typeof a){(0,m.A)(s,r),e.preScale={...t.preScale,scaled:!0};const{rescaleIntercept:n,rescaleSlope:a,suvbw:o}=r;S=a*i+n,E=a*c+n,o&&(S*=o,E*=o)}}else g&&(e.preScale={enabled:!0,scaled:!1},S=i,E=c);e.pixelData=s,e.smallestPixelValue=S,e.largestPixelValue=E;const P=(new Date).getTime();return e.decodeTimeInMS=P-r,e}function x(e,t,r){const n=new((0,h.A)(e,t))(r.pixelData.length);return n.set(r.pixelData,0),n}function A(e){if(!e)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.")}const E={decodeTask:({imageFrame:e,transferSyntax:t,decodeConfig:r,options:n,pixelData:a,callbackFn:o})=>async function(e,t,r,n,a,o){const m=(new Date).getTime();let b,h=null;switch(t){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":case"1.2.840.10008.1.2.1.99":h=(0,s.A)(e,r);break;case"1.2.840.10008.1.2.2":h=(0,i.A)(e,r);break;case"1.2.840.10008.1.2.5":h=(0,c.A)(e,r);break;case"1.2.840.10008.1.2.4.50":b={...e},h=(0,l.A)(r,b);break;case"1.2.840.10008.1.2.4.51":h=(0,p.A)(e,r);break;case"1.2.840.10008.1.2.4.57":case"1.2.840.10008.1.2.4.70":h=(0,u.A)(e,r);break;case"1.2.840.10008.1.2.4.80":case"1.2.840.10008.1.2.4.81":b={signed:1===e.pixelRepresentation,bytesPerPixel:e.bitsAllocated<=8?1:2,...e},h=(0,f.A)(r,b);break;case"1.2.840.10008.1.2.4.90":case"1.2.840.10008.1.2.4.91":b={...e},h=(0,g.A)(r,b);break;case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":b={...e},h=(0,d.A)(r,b);break;default:throw new Error(`no decoder for transfer syntax ${t}`)}if(!h)throw new Error("decodePromise not defined");const y=S(await h,a,m);return o?.(y),y}(e,t,a,0,n,o)};(0,o.p)(E)},6221:()=>{},4457:()=>{},4150:()=>{},1966:()=>{},9696:()=>{},2544:()=>{},4304:()=>{},1440:()=>{},4590:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const n=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.finalizer"),i=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,l={canHandle:e=>c(e)&&e[n],serialize(e){const{port1:t,port2:r}=new MessageChannel;return u(e,t),[r,[r]]},deserialize:e=>(e.start(),function(e,t){const r=new Map;return e.addEventListener("message",(function(e){const{data:t}=e;if(!t||!t.id)return;const n=r.get(t.id);if(n)try{n(t)}finally{r.delete(t.id)}})),h(e,r,[],t)}(e))},p=new Map([["proxy",l],["throw",{canHandle:e=>c(e)&&i in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=globalThis,r=["*"]){t.addEventListener("message",(function a(o){if(!o||!o.data)return;if(!function(e,t){for(const r of e){if(t===r||"*"===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}(r,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:c,type:l,path:p}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(S);let d;try{const t=p.slice(0,-1).reduce(((e,t)=>e[t]),e),r=p.reduce(((e,t)=>e[t]),e);switch(l){case"GET":d=r;break;case"SET":t[p.slice(-1)[0]]=S(o.data.value),d=!0;break;case"APPLY":d=r.apply(t,g);break;case"CONSTRUCT":d=function(e){return Object.assign(e,{[n]:!0})}(new r(...g));break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;u(e,r),d=function(e,t){return v.set(e,t),e}(t,[t])}break;case"RELEASE":d=void 0;break;default:return}}catch(e){d={value:e,[i]:0}}Promise.resolve(d).catch((e=>({value:e,[i]:0}))).then((r=>{const[n,o]=w(r);t.postMessage(Object.assign(Object.assign({},n),{id:c}),o),"RELEASE"===l&&(t.removeEventListener("message",a),f(t),s in e&&"function"==typeof e[s]&&e[s]())})).catch((e=>{const[r,n]=w({value:new TypeError("Unserializable return value"),[i]:0});t.postMessage(Object.assign(Object.assign({},r),{id:c}),n)}))})),t.start&&t.start()}function f(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function g(e){if(e)throw new Error("Proxy has been released and is not useable")}function d(e){return x(e,new Map,{type:"RELEASE"}).then((()=>{f(e)}))}const m=new WeakMap,b="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(m.get(e)||0)-1;m.set(e,t),0===t&&d(e)}));function h(e,t,r=[],n=function(){}){let s=!1;const i=new Proxy(n,{get(n,a){if(g(s),a===o)return()=>{!function(e){b&&b.unregister(e)}(i),d(e),t.clear(),s=!0};if("then"===a){if(0===r.length)return{then:()=>i};const n=x(e,t,{type:"GET",path:r.map((e=>e.toString()))}).then(S);return n.then.bind(n)}return h(e,t,[...r,a])},set(n,a,o){g(s);const[i,c]=w(o);return x(e,t,{type:"SET",path:[...r,a].map((e=>e.toString())),value:i},c).then(S)},apply(n,o,i){g(s);const c=r[r.length-1];if(c===a)return x(e,t,{type:"ENDPOINT"}).then(S);if("bind"===c)return h(e,t,r.slice(0,-1));const[l,p]=y(i);return x(e,t,{type:"APPLY",path:r.map((e=>e.toString())),argumentList:l},p).then(S)},construct(n,a){g(s);const[o,i]=y(a);return x(e,t,{type:"CONSTRUCT",path:r.map((e=>e.toString())),argumentList:o},i).then(S)}});return function(e,t){const r=(m.get(t)||0)+1;m.set(t,r),b&&b.register(e,t,e)}(i,e),i}function y(e){const t=e.map(w);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const v=new WeakMap;function w(e){for(const[t,r]of p)if(r.canHandle(e)){const[n,a]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},a]}return[{type:"RAW",value:e},v.get(e)||[]]}function S(e){switch(e.type){case"HANDLER":return p.get(e.name).deserialize(e.value);case"RAW":return e.value}}function x(e,t,r,n){return new Promise((a=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.set(o,a),e.start&&e.start(),e.postMessage(Object.assign({id:o},r),n)}))}}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,a),o.exports}a.m=r,a.x=()=>{var e=a.O(void 0,[612],(()=>a(4218)));return e=a.O(e)},e=[],a.O=(t,r,n,o)=>{if(!r){var s=1/0;for(p=0;p<e.length;p++){for(var[r,n,o]=e[p],i=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](r[c])))?r.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(p--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[r,n,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>e+".bundle.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b=self.location+"";var e={86:1};a.f.i=(t,r)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[],r=t.push.bind(t);t.push=t=>{var[n,o,s]=t;for(var i in o)a.o(o,i)&&(a.m[i]=o[i]);for(s&&s(a);n.length;)e[n.pop()]=1;r(t)}})(),t=a.x,a.x=()=>a.e(612).then(t);a.x()})();