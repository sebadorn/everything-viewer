(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[2146],{57975:e=>{"use strict";function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function t(e,n){for(var t,r="",o=0,i=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)t=e.charCodeAt(s);else{if(47===t)break;t=47}if(47===t){if(i===s-1||1===a);else if(i!==s-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var f=r.lastIndexOf("/");if(f!==r.length-1){-1===f?(r="",o=0):o=(r=r.slice(0,f)).length-1-r.lastIndexOf("/"),i=s,a=0;continue}}else if(2===r.length||1===r.length){r="",o=0,i=s,a=0;continue}n&&(r.length>0?r+="/..":r="..",o=2)}else r.length>0?r+="/"+e.slice(i+1,s):r=e.slice(i+1,s),o=s-i-1;i=s,a=0}else 46===t&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var e,r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===e&&(e=process.cwd()),a=e),n(a),0!==a.length&&(r=a+"/"+r,o=47===a.charCodeAt(0))}return r=t(r,!o),o?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(n(e),0===e.length)return".";var r=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=t(e,!r)).length||r||(e="."),e.length>0&&o&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var o=arguments[t];n(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":r.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t)return"";if((e=r.resolve(e))===(t=r.resolve(t)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var i=e.length,a=i-o,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var f=t.length-s,c=a<f?a:f,u=-1,l=0;l<=c;++l){if(l===c){if(f>c){if(47===t.charCodeAt(s+l))return t.slice(s+l+1);if(0===l)return t.slice(s+l)}else a>c&&(47===e.charCodeAt(o+l)?u=l:0===l&&(u=0));break}var h=e.charCodeAt(o+l);if(h!==t.charCodeAt(s+l))break;47===h&&(u=l)}var d="";for(l=o+u+1;l<=i;++l)l!==i&&47!==e.charCodeAt(l)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(s+u):(s+=u,47===t.charCodeAt(s)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,o=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?r?"/":".":r&&1===o?"//":e.slice(0,o)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var r,o=0,i=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,f=-1;for(r=e.length-1;r>=0;--r){var c=e.charCodeAt(r);if(47===c){if(!a){o=r+1;break}}else-1===f&&(a=!1,f=r+1),s>=0&&(c===t.charCodeAt(s)?-1===--s&&(i=r):(s=-1,i=f))}return o===i?i=f:-1===i&&(i=e.length),e.slice(o,i)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){o=r+1;break}}else-1===i&&(a=!1,i=r+1);return-1===i?"":e.slice(o,i)},extname:function(e){n(e);for(var t=-1,r=0,o=-1,i=!0,a=0,s=e.length-1;s>=0;--s){var f=e.charCodeAt(s);if(47!==f)-1===o&&(i=!1,o=s+1),46===f?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){r=s+1;break}}return-1===t||-1===o||0===a||1===a&&t===o-1&&t===r+1?"":e.slice(t,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,n){var t=n.dir||n.root,r=n.base||(n.name||"")+(n.ext||"");return t?t===n.root?t+r:t+e+r:r}("/",e)},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,o=e.charCodeAt(0),i=47===o;i?(t.root="/",r=1):r=0;for(var a=-1,s=0,f=-1,c=!0,u=e.length-1,l=0;u>=r;--u)if(47!==(o=e.charCodeAt(u)))-1===f&&(c=!1,f=u+1),46===o?-1===a?a=u:1!==l&&(l=1):-1!==a&&(l=-1);else if(!c){s=u+1;break}return-1===a||-1===f||0===l||1===l&&a===f-1&&a===s+1?-1!==f&&(t.base=t.name=0===s&&i?e.slice(1,f):e.slice(s,f)):(0===s&&i?(t.name=e.slice(1,a),t.base=e.slice(1,f)):(t.name=e.slice(s,a),t.base=e.slice(s,f)),t.ext=e.slice(a,f)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},79596:(e,n,t)=>{
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:t.g):e=>(r||(r=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},92146:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>F,remote:()=>K,toMagnetURI:()=>q,toTorrentFile:()=>N});
/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/
const r="0123456789abcdef",o=[],i=[];for(let e=0;e<256;e++)o[e]=r[e>>4&15]+r[15&e],e<16&&(e<10?i[48+e]=e:i[87+e]=e);const a=e=>{const n=e.length;let t="",r=0;for(;r<n;)t+=o[e[r++]];return t},s=e=>{const n=e.length>>1,t=n<<1,r=new Uint8Array(n);let o=0,a=0;for(;a<t;)r[o++]=i[e.charCodeAt(a++)]<<4|i[e.charCodeAt(a++)];return r};for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"==typeof Uint8Array?[]:new Uint8Array(256),u=0;u<64;u++)c[f.charCodeAt(u)]=u;const l=new TextDecoder,h=(e,n)=>{if(!n)return l.decode(e);return new TextDecoder(n).decode(e)},d=new TextEncoder,g=e=>d.encode(e),p="undefined"!=typeof window?window:self,y=p.crypto||p.msCrypto||{},b=y.subtle||y.webkitSubtle,w={hex:a,base64:e=>function(e){var n,t=new Uint8Array(e),r=t.length,o="";for(n=0;n<r;n+=3)o+=f[t[n]>>2],o+=f[(3&t[n])<<4|t[n+1]>>4],o+=f[(15&t[n+1])<<2|t[n+2]>>6],o+=f[63&t[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e)},m=async(e,n,t="sha-1")=>{if(!b)throw new Error("no web crypto support");"string"==typeof e&&(e=g(e));const r=new Uint8Array(await b.digest(t,e));return n?w[n](r):r};function A(e){const n=e<0?1:0;return e=Math.abs(Number(e||1)),Math.floor(Math.log10(e))+1+n}function v(e){return ArrayBuffer.isView(e)?"arraybufferview":Array.isArray(e)?"array":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof Set?"set":e instanceof Map?"map":e instanceof String?"string":e instanceof ArrayBuffer?"arraybuffer":typeof e}function x(e,n,t){const r=[];let o=null;return x._encode(r,e),o=((e,n=0)=>{const t=e.length||0;if(!n){let r=t;for(;r--;)n+=e[r].length}const r=new Uint8Array(n);let o=n,i=t;for(;i--;)o-=e[i].length,r.set(e[i],o);return r})(r),x.bytes=o.length,ArrayBuffer.isView(n)?(n.set(o,t),n):o}x.bytes=-1,x._floatConversionDetected=!1,x._encode=function(e,n){if(null!=n)switch(v(n)){case"object":x.dict(e,n);break;case"map":x.dictMap(e,n);break;case"array":x.list(e,n);break;case"set":x.listSet(e,n);break;case"string":x.string(e,n);break;case"number":case"boolean":x.number(e,n);break;case"arraybufferview":x.buffer(e,new Uint8Array(n.buffer,n.byteOffset,n.byteLength));break;case"arraybuffer":x.buffer(e,new Uint8Array(n))}};const C=new Uint8Array([101]),k=new Uint8Array([100]),B=new Uint8Array([108]);x.buffer=function(e,n){e.push(g(n.length+":"),n)},x.string=function(e,n){e.push(g(g(n).byteLength+":"+n))},x.number=function(e,n){if(Number.isInteger(n))return e.push(g("i"+BigInt(n)+"e"));const t=2147483648,r=(n/t|0)*t+(n%t|0);e.push(g("i"+r+"e")),r===n||x._floatConversionDetected||(x._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+n+'":','Bencoding only defines support for integers, value was converted to "'+r+'"'),console.trace())},x.dict=function(e,n){e.push(k);let t,r=0;const o=Object.keys(n).sort(),i=o.length;for(;r<i;r++)t=o[r],null!=n[t]&&(x.string(e,t),x._encode(e,n[t]));e.push(C)},x.dictMap=function(e,n){e.push(k);const t=Array.from(n.keys()).sort();for(const r of t)null!=n.get(r)&&(ArrayBuffer.isView(r)?x._encode(e,r):x.string(e,String(r)),x._encode(e,n.get(r)));e.push(C)},x.list=function(e,n){let t=0;const r=n.length;for(e.push(B);t<r;t++)null!=n[t]&&x._encode(e,n[t]);e.push(C)},x.listSet=function(e,n){e.push(B);for(const t of n)null!=t&&x._encode(e,t);e.push(C)};const L=x;function E(e,n,t){let r=0,o=1;for(let i=n;i<t;i++){const t=e[i];if(t<58&&t>=48)r=10*r+(t-48);else if(i!==n||43!==t){if(i!==n||45!==t){if(46===t)break;throw new Error("not a number: buffer["+i+"] = "+t)}o=-1}}return r*o}function H(e,n,t,r){return null==e||0===e.length?null:("number"!=typeof n&&null==r&&(r=n,n=void 0),"number"!=typeof t&&null==r&&(r=t,t=void 0),H.position=0,H.encoding=r||null,H.data=ArrayBuffer.isView(e)?new Uint8Array(e.slice(n,t)):g(e),H.bytes=H.data.length,H.next())}H.bytes=0,H.position=0,H.data=null,H.encoding=null,H.next=function(){switch(H.data[H.position]){case 100:return H.dictionary();case 108:return H.list();case 105:return H.integer();default:return H.buffer()}},H.find=function(e){let n=H.position;const t=H.data.length,r=H.data;for(;n<t;){if(r[n]===e)return n;n++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")},H.dictionary=function(){H.position++;const e={};for(;101!==H.data[H.position];){const n=H.buffer();let t=h(n);t.includes("�")&&(t=a(n)),e[t]=H.next()}return H.position++,e},H.list=function(){H.position++;const e=[];for(;101!==H.data[H.position];)e.push(H.next());return H.position++,e},H.integer=function(){const e=H.find(101),n=E(H.data,H.position+1,e);return H.position+=e+1-H.position,n},H.buffer=function(){let e=H.find(58);const n=E(H.data,H.position,e),t=++e+n;return H.position=t,H.encoding?h(H.data.slice(e,t)):H.data.slice(e,t)};function U(e){if(null==e)return 0;const n=v(e);switch(n){case"arraybufferview":return function(e){const n=e.byteLength-e.byteOffset;return A(n)+1+n}(e);case"string":return function(e){const n=g(e).byteLength;return A(n)+1+n}(e);case"array":case"set":return function(e){let n=2;for(const t of e)n+=U(t);return n}(e);case"number":return 1+A(Math.floor(e))+1;case"bigint":return 1+e.toString().length+1;case"object":return function(e){let n=2;const t=Object.keys(e);for(let r=0;r<t.length;r++){const o=g(t[r]).byteLength;n+=A(o)+1+o,n+=U(e[t[r]])}return n}(e);case"map":return function(e){let n=2;for(const[t,r]of e){const e=g(t).byteLength;n+=A(e)+1+e,n+=U(r)}return n}(e);default:throw new TypeError(`Unsupported value of type "${n}"`)}}const I={encode:L,decode:H,byteLength:U,encodingLength:U};var $=t(13208);self.Blob,self.File,self.FormData,self.Headers,self.Request,self.Response,self.AbortController,self.AbortSignal;const V=self.fetch||(()=>{throw new Error("global fetch is not available!")}),S=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];const R=function(e){if(!ArrayBuffer.isView(e)&&"string"!=typeof e)throw new TypeError("base32.decode only takes Buffer or string as parameter");let n,t=0,r=0,o=0;ArrayBuffer.isView(e)||(e=g(e));const i=new Uint8Array(Math.ceil(5*e.length/8));for(let a=0;a<e.length&&61!==e[a];a++){const s=e[a]-48;if(!(s<S.length))throw new Error("Invalid input - it is not base32 encoded string");r=S[s],t<=3?(t=(t+5)%8,0===t?(n|=r,i[o]=n,o++,n=0):n|=255&r<<8-t):(t=(t+5)%8,n|=255&r>>>t,i[o]=n,o++,n=255&r<<8-t)}return i.subarray(0,o)};function T(e){return e.reduce((e,n,t,r)=>{const o=n.split("-").map(e=>parseInt(e));return e.concat(((e,n=e)=>Array.from({length:n-e+1},(n,t)=>t+e))(...o))},[])}const M=
/*! magnet-uri. MIT License. WebTorrent LLC <https://webtorrent.io/opensource> */
function(e){const n={},t=e.split("magnet:?")[1];let r;if((t&&t.length>=0?t.split("&"):[]).forEach(e=>{const t=e.split("=");if(2!==t.length)return;const r=t[0];let o=t[1];"dn"===r&&(o=decodeURIComponent(o).replace(/\+/g," ")),"tr"!==r&&"xs"!==r&&"as"!==r&&"ws"!==r||(o=decodeURIComponent(o)),"kt"===r&&(o=decodeURIComponent(o).split("+")),"ix"===r&&(o=Number(o)),"so"===r&&(o=T(decodeURIComponent(o).split(","))),n[r]?(Array.isArray(n[r])||(n[r]=[n[r]]),n[r].push(o)):n[r]=o}),n.xt){(Array.isArray(n.xt)?n.xt:[n.xt]).forEach(e=>{(r=e.match(/^urn:btih:(.{40})/))?n.infoHash=r[1].toLowerCase():(r=e.match(/^urn:btih:(.{32})/))?n.infoHash=a(R(r[1])):(r=e.match(/^urn:btmh:1220(.{64})/))&&(n.infoHashV2=r[1].toLowerCase())})}if(n.xs){(Array.isArray(n.xs)?n.xs:[n.xs]).forEach(e=>{(r=e.match(/^urn:btpk:(.{64})/))&&(n.publicKey=r[1].toLowerCase())})}return n.infoHash&&(n.infoHashBuffer=s(n.infoHash)),n.infoHashV2&&(n.infoHashV2Buffer=s(n.infoHashV2)),n.publicKey&&(n.publicKeyBuffer=s(n.publicKey)),n.dn&&(n.name=n.dn),n.kt&&(n.keywords=n.kt),n.announce=[],("string"==typeof n.tr||Array.isArray(n.tr))&&(n.announce=n.announce.concat(n.tr)),n.urlList=[],("string"==typeof n.as||Array.isArray(n.as))&&(n.urlList=n.urlList.concat(n.as)),("string"==typeof n.ws||Array.isArray(n.ws))&&(n.urlList=n.urlList.concat(n.ws)),n.peerAddresses=[],("string"==typeof n["x.pe"]||Array.isArray(n["x.pe"]))&&(n.peerAddresses=n.peerAddresses.concat(n["x.pe"])),n.announce=Array.from(new Set(n.announce)),n.urlList=Array.from(new Set(n.urlList)),n.peerAddresses=Array.from(new Set(n.peerAddresses)),n};var _=t(57975),j=t(79596);
/*! parse-torrent. MIT License. WebTorrent LLC <https://webtorrent.io/opensource> */
async function O(e){if("string"==typeof e&&/^(stream-)?magnet:/.test(e)){const n=M(e);if(!n.infoHash)throw new Error("Invalid torrent identifier");return n}if("string"==typeof e&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return M(`magnet:?xt=urn:btih:${e}`);if(ArrayBuffer.isView(e)&&20===e.length)return M(`magnet:?xt=urn:btih:${a(e)}`);if(ArrayBuffer.isView(e))return await async function(e){ArrayBuffer.isView(e)&&(e=I.decode(e));D(e.info,"info"),D(e.info["name.utf-8"]||e.info.name,"info.name"),D(e.info["piece length"],"info['piece length']"),D(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(e=>{D("number"==typeof e.length,"info.files[0].length"),D(e["path.utf-8"]||e.path,"info.files[0].path")}):D("number"==typeof e.info.length,"info.length");const n={info:e.info,infoBuffer:I.encode(e.info),name:h(e.info["name.utf-8"]||e.info.name),announce:[]};n.infoHashBuffer=await m(n.infoBuffer),n.infoHash=a(n.infoHashBuffer),void 0!==e.info.private&&(n.private=!!e.info.private);e["creation date"]&&(n.created=new Date(1e3*e["creation date"]));e["created by"]&&(n.createdBy=h(e["created by"]));ArrayBuffer.isView(e.comment)&&(n.comment=h(e.comment));Array.isArray(e["announce-list"])&&e["announce-list"].length>0?e["announce-list"].forEach(e=>{e.forEach(e=>{n.announce.push(h(e))})}):e.announce&&n.announce.push(h(e.announce));ArrayBuffer.isView(e["url-list"])&&(e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[]);n.urlList=(e["url-list"]||[]).map(e=>h(e)),n.announce=Array.from(new Set(n.announce)),n.urlList=Array.from(new Set(n.urlList));let t=0;const r=e.info.files||[e.info];n.files=r.map((e,r)=>{const o=[].concat(n.name,e["path.utf-8"]||e.path||[]).map(e=>ArrayBuffer.isView(e)?h(e):e);return t+=e.length,{path:_.join.apply(null,[_.sep].concat(o)).slice(1),name:o[o.length-1],length:e.length,offset:t-e.length}}),n.length=t;const o=n.files[n.files.length-1];return n.pieceLength=e.info["piece length"],n.lastPieceLength=(o.offset+o.length)%n.pieceLength||n.pieceLength,n.pieces=function(e){const n=[];for(let t=0;t<e.length;t+=20)n.push(a(e.slice(t,t+20)));return n}(e.info.pieces),n}(e);if(e&&e.infoHash)return e.infoHash=e.infoHash.toLowerCase(),e.announce||(e.announce=[]),"string"==typeof e.announce&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}async function K(e,n,t){if("function"==typeof n)return K(e,{},n);if("function"!=typeof t)throw new Error("second argument must be a Function");let r;try{r=await O(e)}catch(e){}if(r&&r.infoHash)j(()=>{t(null,r)});else if(o=e,"undefined"!=typeof Blob&&o instanceof Blob)try{i(new Uint8Array(await e.arrayBuffer()))}catch(e){return t(new Error(`Error converting Blob: ${e.message}`))}else if(/^https?:/.test(e))try{const t=await V(e,{headers:{"user-agent":"WebTorrent (https://webtorrent.io)"},signal:AbortSignal.timeout(3e4),...n});i(new Uint8Array(await t.arrayBuffer()))}catch(e){return t(new Error(`Error downloading torrent: ${e.message}`))}else"function"==typeof $.readFile&&"string"==typeof e?$.readFile(e,(e,n)=>{if(e)return t(new Error("Invalid torrent identifier"));i(n)}):j(()=>{t(new Error("Invalid torrent identifier"))});var o;async function i(e){try{r=await O(e)}catch(e){return t(e)}r&&r.infoHash?t(null,r):t(new Error("Invalid torrent identifier"))}}function N(e){const n={info:e.info};return n["announce-list"]=(e.announce||[]).map(e=>(n.announce||(n.announce=e),[e=g(e)])),n["url-list"]=e.urlList||[],void 0!==e.private&&(n.private=Number(e.private)),e.created&&(n["creation date"]=e.created.getTime()/1e3|0),e.createdBy&&(n["created by"]=e.createdBy),e.comment&&(n.comment=e.comment),I.encode(n)}function D(e,n){if(!e)throw new Error(`Torrent is missing required field: ${n}`)}const F=O,q=function(e){e=Object.assign({},e);let n=new Set;e.xt&&"string"==typeof e.xt&&n.add(e.xt),e.xt&&Array.isArray(e.xt)&&(n=new Set(e.xt)),e.infoHashBuffer&&n.add(`urn:btih:${a(e.infoHashBuffer)}`),e.infoHash&&n.add(`urn:btih:${e.infoHash}`),e.infoHashV2Buffer&&n.add(e.xt=`urn:btmh:1220${a(e.infoHashV2Buffer)}`),e.infoHashV2&&n.add(`urn:btmh:1220${e.infoHashV2}`);const t=Array.from(n);1===t.length&&(e.xt=t[0]),t.length>1&&(e.xt=t),e.publicKeyBuffer&&(e.xs=`urn:btpk:${a(e.publicKeyBuffer)}`),e.publicKey&&(e.xs=`urn:btpk:${e.publicKey}`),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as),e.peerAddresses&&(e["x.pe"]=e.peerAddresses);let r="magnet:?";return Object.keys(e).filter(e=>2===e.length||"x.pe"===e).forEach((n,t)=>{const o=Array.isArray(e[n])?e[n]:[e[n]];var i;o.forEach((e,o)=>{(t>0||o>0)&&("kt"!==n&&"so"!==n||0===o)&&(r+="&"),"dn"===n&&(e=encodeURIComponent(e).replace(/%20/g,"+")),"tr"!==n&&"as"!==n&&"ws"!==n||(e=encodeURIComponent(e)),"xs"!==n||e.startsWith("urn:btpk:")||(e=encodeURIComponent(e)),"kt"===n&&(e=encodeURIComponent(e)),"so"!==n&&(r+="kt"===n&&o>0?`+${e}`:`${n}=${e}`)}),"so"===n&&(r+=`${n}=${i=o,i.reduce((e,n,t,r)=>(0!==t&&n===r[t-1]+1||e.push([]),e[e.length-1].push(n),e),[]).map(e=>e.length>1?`${e[0]}-${e[e.length-1]}`:`${e[0]}`)}`)}),r}}}]);