"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[4610],{74610:(e,o,n)=>{n.d(o,{KHR_node_hoverability:()=>d});var t=n(37812),r=n(48966),a=n(49532);const i="KHR_node_hoverability",s="targetMeshPointerOver_";(0,r.rO)("event/onHoverIn",i,{blocks:["FlowGraphPointerOverEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer:e=>[s+e[0]]}},outputs:{values:{hoverNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"targetMesh",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"meshUnderPointer",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(e,o,n,t,r,a,i){const l=r[r.length-1];l.config=l.config||{},l.config.glTF=i;const d=e.configuration?.nodeIndex?.value[0];if(void 0===d||"number"!=typeof d)throw new Error("nodeIndex not found in configuration");const u=s+d;return r[1].config.variable=u,a._userVariables[u]={className:"Mesh",id:i?.nodes?.[d]._babylonTransformNode?.id,uniqueId:i?.nodes?.[d]._babylonTransformNode?.uniqueId},r}});const l="targetMeshPointerOut_";(0,r.rO)("event/onHoverOut",i,{blocks:["FlowGraphPointerOutEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer:e=>[l+e[0]]}},outputs:{values:{hoverNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"targetMesh",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"meshOutOfPointer",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(e,o,n,t,r,a,i){const s=r[r.length-1];s.config=s.config||{},s.config.glTF=i;const d=e.configuration?.nodeIndex?.value[0];if(void 0===d||"number"!=typeof d)throw new Error("nodeIndex not found in configuration");const u=l+d;return r[1].config.variable=u,a._userVariables[u]={className:"Mesh",id:i?.nodes?.[d]._babylonTransformNode?.id,uniqueId:i?.nodes?.[d]._babylonTransformNode?.uniqueId},r}}),(0,a.oR)("/nodes/{}/extensions/KHR_node_hoverability/hoverable",{get:e=>{const o=e._babylonTransformNode;return!o||void 0===o.pointerOverDisableMeshTesting||o.pointerOverDisableMeshTesting},set:(e,o)=>{o._primitiveBabylonMeshes?.forEach((o=>{o.pointerOverDisableMeshTesting=!e}))},getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"pointerOverDisableMeshTesting"],type:"boolean"});class d{constructor(e){this.name=i,this._loader=e,this.enabled=e.isExtensionUsed(i)}async onReady(){this._loader.gltf.nodes?.forEach((e=>{e.extensions?.KHR_node_hoverability&&!1===e.extensions?.KHR_node_hoverability.hoverable&&e._babylonTransformNode?.getChildMeshes().forEach((e=>{e.pointerOverDisableMeshTesting=!0}))}))}dispose(){this._loader=null}}(0,t.Hg)(i),(0,t.Ye)(i,!0,(e=>new d(e)))}}]);