"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[5900],{34399:(r,e)=>{function t(r,e,t,a){for(var n=r[e++],i=1<<n,o=i+1,l=o+1,f=n+1,h=(1<<f)-1,s=0,c=0,d=0,v=r[e++],u=new Int32Array(4096),w=null;;){for(;s<16&&0!==v;)c|=r[e++]<<s,s+=8,1===v?v=r[e++]:--v;if(s<f)break;var g=c&h;if(c>>=f,s-=f,g!==i){if(g===o)break;for(var k=g<l?g:w,b=0,p=k;p>i;)p=u[p]>>8,++b;var _=p;if(d+b+(k!==g?1:0)>a)return void console.log("Warning, gif stream longer than expected.");t[d++]=_;var x=d+=b;for(k!==g&&(t[d++]=_),p=k;b--;)p=u[p],t[--x]=255&p,p>>=8;null!==w&&l<4096&&(u[l++]=w<<8|_,l>=h+1&&f<12&&(++f,h=h<<1|1)),w=g}else l=o+1,h=(1<<(f=n+1))-1,w=null}return d!==a&&console.log("Warning, gif stream shorter than expected."),t}try{e.GifReader=function(r){var e=0;if(71!==r[e++]||73!==r[e++]||70!==r[e++]||56!==r[e++]||56!=(r[e++]+1&253)||97!==r[e++])throw new Error("Invalid GIF 87a/89a header.");var a=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],o=i>>7,l=1<<1+(7&i);r[e++],r[e++];var f=null,h=null;o&&(f=e,h=l,e+=3*l);var s=!0,c=[],d=0,v=null,u=0,w=null;for(this.width=a,this.height=n;s&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(11!==r[e]||78==r[e+1]&&69==r[e+2]&&84==r[e+3]&&83==r[e+4]&&67==r[e+5]&&65==r[e+6]&&80==r[e+7]&&69==r[e+8]&&50==r[e+9]&&46==r[e+10]&&48==r[e+11]&&3==r[e+12]&&1==r[e+13]&&0==r[e+16])e+=14,w=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((z=r[e++])>=0))throw Error("Invalid block size");if(0===z)break;e+=z}break;case 249:if(4!==r[e++]||0!==r[e+4])throw new Error("Invalid graphics extension block.");var g=r[e++];d=r[e++]|r[e++]<<8,v=r[e++],1&g||(v=null),u=g>>2&7,e++;break;case 254:for(;;){if(!((z=r[e++])>=0))throw Error("Invalid block size");if(0===z)break;e+=z}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var k=r[e++]|r[e++]<<8,b=r[e++]|r[e++]<<8,p=r[e++]|r[e++]<<8,_=r[e++]|r[e++]<<8,x=r[e++],y=x>>6&1,m=1<<1+(7&x),I=f,E=h,A=!1;x>>7&&(A=!0,I=e,E=m,e+=3*m);var F=e;for(e++;;){var z;if(!((z=r[e++])>=0))throw Error("Invalid block size");if(0===z)break;e+=z}c.push({x:k,y:b,width:p,height:_,has_local_palette:A,palette_offset:I,palette_size:E,data_offset:F,data_length:e-F,transparent_index:v,interlaced:!!y,delay:d,disposal:u});break;case 59:s=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return w},this.frameInfo=function(r){if(r<0||r>=c.length)throw new Error("Frame index out of range.");return c[r]},this.decodeAndBlitFrameBGRA=function(e,n){var i=this.frameInfo(e),o=i.width*i.height,l=new Uint8Array(o);t(r,i.data_offset,l,o);var f=i.palette_offset,h=i.transparent_index;null===h&&(h=256);var s=i.width,c=a-s,d=s,v=4*(i.y*a+i.x),u=4*((i.y+i.height)*a+i.x),w=v,g=4*c;!0===i.interlaced&&(g+=4*a*7);for(var k=8,b=0,p=l.length;b<p;++b){var _=l[b];if(0===d&&(d=s,(w+=g)>=u&&(g=4*c+4*a*(k-1),w=v+(s+c)*(k<<1),k>>=1)),_===h)w+=4;else{var x=r[f+3*_],y=r[f+3*_+1],m=r[f+3*_+2];n[w++]=m,n[w++]=y,n[w++]=x,n[w++]=255}--d}},this.decodeAndBlitFrameRGBA=function(e,n){var i=this.frameInfo(e),o=i.width*i.height,l=new Uint8Array(o);t(r,i.data_offset,l,o);var f=i.palette_offset,h=i.transparent_index;null===h&&(h=256);var s=i.width,c=a-s,d=s,v=4*(i.y*a+i.x),u=4*((i.y+i.height)*a+i.x),w=v,g=4*c;!0===i.interlaced&&(g+=4*a*7);for(var k=8,b=0,p=l.length;b<p;++b){var _=l[b];if(0===d&&(d=s,(w+=g)>=u&&(g=4*c+4*a*(k-1),w=v+(s+c)*(k<<1),k>>=1)),_===h)w+=4;else{var x=r[f+3*_],y=r[f+3*_+1],m=r[f+3*_+2];n[w++]=x,n[w++]=y,n[w++]=m,n[w++]=255}--d}}}}catch(r){}}}]);