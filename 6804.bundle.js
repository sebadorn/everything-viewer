"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[6804],{6804:(e,a,r)=>{r.d(a,{KHR_materials_clearcoat:()=>c});var t=r(23975),o=r(98556),l=r(37812);const s="KHR_materials_clearcoat";class c{constructor(e){this.name=s,this.order=190,this._loader=e,this.enabled=this._loader.isExtensionUsed(s)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,a,r){return o.BT.LoadExtensionAsync(e,a,this.name,async(t,o)=>{const l=new Array;l.push(this._loader.loadMaterialPropertiesAsync(e,a,r)),l.push(this._loadClearCoatPropertiesAsync(t,o,r)),await Promise.all(l)})}_loadClearCoatPropertiesAsync(e,a,r){if(!(r instanceof t.Y))throw new Error(`${e}: Material type not supported`);const o=new Array;return r.clearCoat.isEnabled=!0,r.clearCoat.useRoughnessFromMainTexture=!1,r.clearCoat.remapF0OnInterfaceChange=!1,null!=a.clearcoatFactor?r.clearCoat.intensity=a.clearcoatFactor:r.clearCoat.intensity=0,a.clearcoatTexture&&o.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatTexture`,a.clearcoatTexture,e=>{e.name=`${r.name} (ClearCoat)`,r.clearCoat.texture=e})),null!=a.clearcoatRoughnessFactor?r.clearCoat.roughness=a.clearcoatRoughnessFactor:r.clearCoat.roughness=0,a.clearcoatRoughnessTexture&&(a.clearcoatRoughnessTexture.nonColorData=!0,o.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatRoughnessTexture`,a.clearcoatRoughnessTexture,e=>{e.name=`${r.name} (ClearCoat Roughness)`,r.clearCoat.textureRoughness=e}))),a.clearcoatNormalTexture&&(a.clearcoatNormalTexture.nonColorData=!0,o.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatNormalTexture`,a.clearcoatNormalTexture,e=>{e.name=`${r.name} (ClearCoat Normal)`,r.clearCoat.bumpTexture=e})),r.invertNormalMapX=!r.getScene().useRightHandedSystem,r.invertNormalMapY=r.getScene().useRightHandedSystem,null!=a.clearcoatNormalTexture.scale&&(r.clearCoat.bumpTexture.level=a.clearcoatNormalTexture.scale)),Promise.all(o).then(()=>{})}}(0,l.Hg)(s),(0,l.Ye)(s,!0,e=>new c(e))}}]);