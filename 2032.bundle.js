"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[2032],{12032:(e,t,o)=>{o.d(t,{KHR_materials_anisotropy:()=>a});var r=o(98556),s=o(37812);const n="KHR_materials_anisotropy";class a{constructor(e){this.name=n,this.order=195,this._loader=e,this.enabled=this._loader.isExtensionUsed(n)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,t,o){return r.BT.LoadExtensionAsync(e,t,this.name,async(r,s)=>{const n=new Array;n.push(this._loader.loadMaterialPropertiesAsync(e,t,o)),n.push(this._loadAnisotropyPropertiesAsync(r,s,o)),await Promise.all(n)})}async _loadAnisotropyPropertiesAsync(e,t,o){const r=this._loader._getOrCreateMaterialAdapter(o),s=new Array,n=t.anisotropyStrength??0,a=t.anisotropyRotation??0;r.specularRoughnessAnisotropy=n,r.geometryTangentAngle=a;const i=t.extensions??{};i.EXT_materials_anisotropy_openpbr&&i.EXT_materials_anisotropy_openpbr.openPbrAnisotropyEnabled||r.configureGltfStyleAnisotropy(!0),t.anisotropyTexture&&(t.anisotropyTexture.nonColorData=!0,s.push(this._loader.loadTextureInfoAsync(`${e}/anisotropyTexture`,t.anisotropyTexture,e=>{e.name=`${o.name} (Anisotropy Intensity)`,r.geometryTangentTexture=e}))),await Promise.all(s)}}(0,s.Hg)(n),(0,s.Ye)(n,!0,e=>new a(e))}}]);