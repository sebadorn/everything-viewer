"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[1011,7777],{7242:(e,t,s)=>{s.d(t,{m:()=>a});var r=s(75524),i=s(998),n=s(79259),o=s(82678);class a{get name(){return this._name}get cameras(){return this._cameras}get engine(){return this._engine}constructor(e,t){this._engine=e,this.uniqueId=o.K.UniqueId,this._name=t,this._renderEffects={},this._renderEffectsForIsolatedPass=new Array,this._cameras=[]}getClassName(){return"PostProcessRenderPipeline"}get isSupported(){for(const e in this._renderEffects)if(Object.prototype.hasOwnProperty.call(this._renderEffects,e)&&!this._renderEffects[e].isSupported)return!1;return!0}addEffect(e){this._renderEffects[e._name]=e}_rebuild(){}_enableEffect(e,t){const s=this._renderEffects[e];s&&s._enable(i.S0.MakeArray(t||this._cameras))}_disableEffect(e,t){const s=this._renderEffects[e];s&&s._disable(i.S0.MakeArray(t||this._cameras))}_attachCameras(e,t){const s=i.S0.MakeArray(e||this._cameras);if(!s)return;const r=[];let n;for(n=0;n<s.length;n++){const e=s[n];e&&(-1===this._cameras.indexOf(e)?this._cameras.push(e):t&&r.push(n))}for(n=0;n<r.length;n++)s.splice(r[n],1);for(const e in this._renderEffects)Object.prototype.hasOwnProperty.call(this._renderEffects,e)&&this._renderEffects[e]._attachCameras(s)}_detachCameras(e){const t=i.S0.MakeArray(e||this._cameras);if(t){for(const e in this._renderEffects)Object.prototype.hasOwnProperty.call(this._renderEffects,e)&&this._renderEffects[e]._detachCameras(t);for(let e=0;e<t.length;e++)this._cameras.splice(this._cameras.indexOf(t[e]),1)}}_update(){for(const e in this._renderEffects)Object.prototype.hasOwnProperty.call(this._renderEffects,e)&&this._renderEffects[e]._update();for(let e=0;e<this._cameras.length;e++){if(!this._cameras[e])continue;const t=this._cameras[e].name;this._renderEffectsForIsolatedPass[t]&&this._renderEffectsForIsolatedPass[t]._update()}}_reset(){this._renderEffects={},this._renderEffectsForIsolatedPass=new Array}_enableMSAAOnFirstPostProcess(e){if(!this._engine._features.supportMSAA)return!1;const t=Object.keys(this._renderEffects);if(t.length>0){const s=this._renderEffects[t[0]].getPostProcesses();s&&(s[0].samples=e)}return!0}_adaptPostProcessesToViewPort(){const e=Object.keys(this._renderEffects);for(const t of e){const e=this._renderEffects[t].getPostProcesses();if(e)for(const t of e)t.adaptScaleToCurrentViewport=!0}}setPrePassRenderer(e){return!1}dispose(){}}(0,r.Cg)([(0,n.lK)()],a.prototype,"_name",void 0)},53645:(e,t,s)=>{s.d(t,{l:()=>i});var r=s(998);class i{constructor(e,t,s,r=!0){this._name=t,this._singleInstance=r,this._getPostProcesses=s,this._cameras={},this._indicesForCamera={},this._postProcesses={}}get isSupported(){for(const e in this._postProcesses)if(Object.prototype.hasOwnProperty.call(this._postProcesses,e)){const t=this._postProcesses[e];for(let e=0;e<t.length;e++)if(!t[e].isSupported)return!1}return!0}_update(){}_attachCameras(e){let t;const s=r.S0.MakeArray(e||this._cameras);if(s)for(let e=0;e<s.length;e++){const r=s[e];if(!r)continue;const i=r.name;if(t=this._singleInstance?0:i,!this._postProcesses[t]){const e=this._getPostProcesses();e&&(this._postProcesses[t]=Array.isArray(e)?e:[e])}this._indicesForCamera[i]||(this._indicesForCamera[i]=[]);const n=this._postProcesses[t];for(const e of n){const t=r.attachPostProcess(e);this._indicesForCamera[i].push(t)}this._cameras[i]||(this._cameras[i]=r)}}_detachCameras(e){const t=r.S0.MakeArray(e||this._cameras);if(t)for(let e=0;e<t.length;e++){const s=t[e],r=s.name,i=this._postProcesses[this._singleInstance?0:r];if(i)for(const e of i)s.detachPostProcess(e);this._cameras[r]&&(this._cameras[r]=null),delete this._indicesForCamera[r]}}_enable(e){const t=r.S0.MakeArray(e||this._cameras);if(t)for(let e=0;e<t.length;e++){const s=t[e],r=s.name,i=this._singleInstance?0:r;for(let n=0;n<this._indicesForCamera[r].length;n++){const o=this._indicesForCamera[r][n],a=s._postProcesses[o];null==a&&t[e].attachPostProcess(this._postProcesses[i][n],o)}}}_disable(e){const t=r.S0.MakeArray(e||this._cameras);if(t)for(let e=0;e<t.length;e++){const s=t[e],r=s.name,i=this._postProcesses[this._singleInstance?0:r];for(const e of i)s.detachPostProcess(e)}}getPostProcesses(e){return this._singleInstance?this._postProcesses[0]:e?this._postProcesses[e.name]:null}}},67777:(e,t,s)=>{s.r(t),s.d(t,{PostProcessRenderPipelineManagerSceneComponent:()=>a});var r=s(16945),i=s(99848);class n{constructor(){this._renderPipelines={},this._onNewPipelineAddedObservable=new i.cP,this._onPipelineRemovedObservable=new i.cP}get onNewPipelineAddedObservable(){return this._onNewPipelineAddedObservable}get onPipelineRemovedObservable(){return this._onPipelineRemovedObservable}get supportedPipelines(){const e=[];for(const t in this._renderPipelines)if(Object.prototype.hasOwnProperty.call(this._renderPipelines,t)){const s=this._renderPipelines[t];s.isSupported&&e.push(s)}return e}addPipeline(e){this.removePipeline(e._name),this._renderPipelines[e._name]=e,this._onNewPipelineAddedObservable.notifyObservers(e)}removePipeline(e){const t=this._renderPipelines[e];t&&(this._onPipelineRemovedObservable.notifyObservers(t),delete this._renderPipelines[e])}attachCamerasToRenderPipeline(e,t,s=!1){const r=this._renderPipelines[e];r&&r._attachCameras(t,s)}detachCamerasFromRenderPipeline(e,t){const s=this._renderPipelines[e];s&&s._detachCameras(t)}enableEffectInPipeline(e,t,s){const r=this._renderPipelines[e];r&&r._enableEffect(t,s)}disableEffectInPipeline(e,t,s){const r=this._renderPipelines[e];r&&r._disableEffect(t,s)}update(){for(const e in this._renderPipelines)if(Object.prototype.hasOwnProperty.call(this._renderPipelines,e)){const t=this._renderPipelines[e];t.isSupported?t._update():(t.dispose(),delete this._renderPipelines[e])}}_rebuild(){for(const e in this._renderPipelines)if(Object.prototype.hasOwnProperty.call(this._renderPipelines,e)){this._renderPipelines[e]._rebuild()}}dispose(){for(const e in this._renderPipelines)if(Object.prototype.hasOwnProperty.call(this._renderPipelines,e)){this._renderPipelines[e].dispose()}}}var o=s(48802);Object.defineProperty(o.Z.prototype,"postProcessRenderPipelineManager",{get:function(){if(!this._postProcessRenderPipelineManager){let e=this._getComponent(r.v.NAME_POSTPROCESSRENDERPIPELINEMANAGER);e||(e=new a(this),this._addComponent(e)),this._postProcessRenderPipelineManager=new n}return this._postProcessRenderPipelineManager},enumerable:!0,configurable:!0});class a{constructor(e){this.name=r.v.NAME_POSTPROCESSRENDERPIPELINEMANAGER,this.scene=e}register(){this.scene._gatherRenderTargetsStage.registerStep(r.v.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER,this,this._gatherRenderTargets)}rebuild(){this.scene._postProcessRenderPipelineManager&&this.scene._postProcessRenderPipelineManager._rebuild()}dispose(){this.scene._postProcessRenderPipelineManager&&this.scene._postProcessRenderPipelineManager.dispose()}_gatherRenderTargets(){this.scene._postProcessRenderPipelineManager&&this.scene._postProcessRenderPipelineManager.update()}}},71011:(e,t,s)=>{s.r(t),s.d(t,{SSAO2RenderingPipeline:()=>R});var r=s(75524),i=s(51137),n=s(79259),o=s(26877),a=s(79923),h=s(30388),l=s(82781),c=s(77891),p=s(7242),_=s(53645),d=s(30848),u=s(56552),f=s(6315);class P{constructor(){this.enabled=!1,this.name="ssao2",this.texturesRequired=[6,5]}}var m=s(41342),g=s(84867),S=s(96041);s(67777);class R extends p.m{set epsilon(e){this._epsilon=e,this._ssaoPostProcess.updateEffect(this._getDefinesForSSAO())}get epsilon(){return this._epsilon}set samples(e){this._samples=e,this._ssaoPostProcess.updateEffect(this._getDefinesForSSAO()),this._sampleSphere=this._generateHemisphere()}get samples(){return this._samples}set textureSamples(e){this._textureSamples=e,this._prePassRenderer?this._prePassRenderer.samples=e:this._originalColorPostProcess.samples=e}get textureSamples(){return this._textureSamples}get _geometryBufferRenderer(){return this._forceGeometryBuffer?this._forcedGeometryBuffer??this._scene.geometryBufferRenderer:null}get _prePassRenderer(){return this._forceGeometryBuffer?null:this._scene.prePassRenderer}set bypassBlur(e){const t=this._getDefinesForBlur(this.expensiveBlur,e),s=this._getSamplersForBlur(e);this._blurHPostProcess.updateEffect(t.h,null,s),this._blurVPostProcess.updateEffect(t.v,null,s),this._bypassBlur=e}get bypassBlur(){return this._bypassBlur}set expensiveBlur(e){const t=this._getDefinesForBlur(e,this._bypassBlur);this._blurHPostProcess.updateEffect(t.h),this._blurVPostProcess.updateEffect(t.v),this._expensiveBlur=e}get expensiveBlur(){return this._expensiveBlur}static get IsSupported(){const e=f.q.LastCreatedEngine;return!!e&&e._features.supportSSAO2}get scene(){return this._scene}constructor(e,t,s,r,n=!1,o=0){if(super(t.getEngine(),e),this.SSAOOriginalSceneColorEffect="SSAOOriginalSceneColorEffect",this.SSAORenderEffect="SSAORenderEffect",this.SSAOBlurHRenderEffect="SSAOBlurHRenderEffect",this.SSAOBlurVRenderEffect="SSAOBlurVRenderEffect",this.SSAOCombineRenderEffect="SSAOCombineRenderEffect",this.totalStrength=1,this.maxZ=100,this.minZAspect=.2,this._epsilon=.02,this._samples=8,this._textureSamples=1,this._forcedGeometryBuffer=null,this._forceGeometryBuffer=!1,this.radius=2,this.base=0,this._bypassBlur=!1,this._expensiveBlur=!0,this.bilateralSamples=16,this.bilateralSoften=0,this.bilateralTolerance=0,this.useViewportInCombineStage=!0,this._bits=new Uint32Array(1),this._scene=t,this._ratio=s,this._textureType=o,n instanceof m.I?(this._forceGeometryBuffer=!0,this._forcedGeometryBuffer=n):this._forceGeometryBuffer=n,!this.isSupported)return void i.V.Error("The current engine does not support SSAO 2.");const a=this._ratio.ssaoRatio||s,h=this._ratio.blurRatio||s;this._forceGeometryBuffer?(this._forcedGeometryBuffer||t.enableGeometryBufferRenderer(),t.geometryBufferRenderer?.generateNormalsInWorldSpace&&i.V.Error("SSAO2RenderingPipeline does not support generateNormalsInWorldSpace=true for the geometry buffer renderer!")):(t.enablePrePassRenderer(),t.prePassRenderer?.generateNormalsInWorldSpace&&i.V.Error("SSAO2RenderingPipeline does not support generateNormalsInWorldSpace=true for the prepass renderer!")),this._createRandomTexture(),this._originalColorPostProcess=new d.v("SSAOOriginalSceneColor",1,null,l.g.BILINEAR_SAMPLINGMODE,t.getEngine(),void 0,this._textureType),this._originalColorPostProcess.samples=this.textureSamples,this._createSSAOPostProcess(1,o),this._createBlurPostProcess(a,h,this._textureType),this._createSSAOCombinePostProcess(h,this._textureType),this.addEffect(new _.l(t.getEngine(),this.SSAOOriginalSceneColorEffect,()=>this._originalColorPostProcess,!0)),this.addEffect(new _.l(t.getEngine(),this.SSAORenderEffect,()=>this._ssaoPostProcess,!0)),this.addEffect(new _.l(t.getEngine(),this.SSAOBlurHRenderEffect,()=>this._blurHPostProcess,!0)),this.addEffect(new _.l(t.getEngine(),this.SSAOBlurVRenderEffect,()=>this._blurVPostProcess,!0)),this.addEffect(new _.l(t.getEngine(),this.SSAOCombineRenderEffect,()=>this._ssaoCombinePostProcess,!0)),t.postProcessRenderPipelineManager.addPipeline(this),r&&t.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(e,r)}getClassName(){return"SSAO2RenderingPipeline"}dispose(e=!1){for(let e=0;e<this._scene.cameras.length;e++){const t=this._scene.cameras[e];this._originalColorPostProcess.dispose(t),this._ssaoPostProcess.dispose(t),this._blurHPostProcess.dispose(t),this._blurVPostProcess.dispose(t),this._ssaoCombinePostProcess.dispose(t)}this._randomTexture.dispose(),e&&!this._forcedGeometryBuffer&&this._scene.disableGeometryBufferRenderer(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),this._scene.postProcessRenderPipelineManager.removePipeline(this._name),super.dispose()}_rebuild(){super._rebuild()}_getSamplersForBlur(e){return e?["textureSampler"]:["textureSampler","depthSampler"]}_getDefinesForBlur(e,t){let s="#define BLUR\n";return t&&(s+="#define BLUR_BYPASS\n"),e||(s+="#define BLUR_LEGACY\n"),{h:s+"#define BLUR_H\n",v:s}}_createBlurPostProcess(e,t,s){const r=this._getDefinesForBlur(this.expensiveBlur,this.bypassBlur),i=this._getSamplersForBlur(this.bypassBlur);this._blurHPostProcess=this._createBlurFilter("BlurH",i,e,r.h,s,!0),this._blurVPostProcess=this._createBlurFilter("BlurV",i,t,r.v,s,!1)}_createBlurFilter(e,t,r,i,n,o){const a=new c.w(e,"ssao2",["outSize","samples","soften","tolerance"],t,r,null,l.g.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,i,n,void 0,void 0,void 0,void 0,this._scene.getEngine().isWebGPU?1:0,(e,t)=>{e?t.push(s.e(5076).then(s.bind(s,45076))):t.push(s.e(5363).then(s.bind(s,85363)))});return a.onApply=e=>{if(!this._scene.activeCamera)return;const t=this._ratio.blurRatio||this._ratio,s=o?this._originalColorPostProcess.width*t:this._originalColorPostProcess.height*t,r=o?this._originalColorPostProcess.width:this._originalColorPostProcess.height;e.setFloat("outSize",s>0?s:r),e.setInt("samples",this.bilateralSamples),e.setFloat("soften",this.bilateralSoften),e.setFloat("tolerance",this.bilateralTolerance),this._geometryBufferRenderer?e.setTexture("depthSampler",this._geometryBufferRenderer.getGBuffer().textures[0]):this._prePassRenderer&&e.setTexture("depthSampler",this._prePassRenderer.getRenderTarget().textures[this._prePassRenderer.getIndex(5)])},a.samples=this.textureSamples,a.autoClear=!1,a}_radicalInverse_VdC(e){return this._bits[0]=e,this._bits[0]=(this._bits[0]<<16|this._bits[0]>>16)>>>0,this._bits[0]=(1431655765&this._bits[0])<<1|(2863311530&this._bits[0])>>>1>>>0,this._bits[0]=(858993459&this._bits[0])<<2|(3435973836&this._bits[0])>>>2>>>0,this._bits[0]=(252645135&this._bits[0])<<4|(4042322160&this._bits[0])>>>4>>>0,this._bits[0]=(16711935&this._bits[0])<<8|(4278255360&this._bits[0])>>>8>>>0,2.3283064365386963e-10*this._bits[0]}_hammersley(e,t){return[e/t,this._radicalInverse_VdC(e)]}_hemisphereSample_uniform(e,t){const s=2*t*Math.PI,r=1-.85*e,i=Math.sqrt(1-r*r);return new a.Pq(Math.cos(s)*i,Math.sin(s)*i,r)}_generateHemisphere(){const e=this.samples,t=[];let s,r=0;for(;r<e;){if(e<16)s=this._hemisphereSample_uniform(Math.random(),Math.random());else{const t=this._hammersley(r,e);s=this._hemisphereSample_uniform(t[0],t[1])}t.push(s.x,s.y,s.z),r++}return t}_getDefinesForSSAO(){let e=`#define SSAO\n#define SAMPLES ${this.samples}\n#define EPSILON ${this.epsilon.toFixed(4)}`;return this._scene.activeCamera?.mode===h.i.ORTHOGRAPHIC_CAMERA&&(e+="\n#define ORTHOGRAPHIC_CAMERA"),e}_createSSAOPostProcess(e,t){this._sampleSphere=this._generateHemisphere();const r=this._getDefinesForSSAO();this._ssaoPostProcess=new c.w("ssao2","ssao2",["sampleSphere","samplesFactor","randTextureTiles","totalStrength","radius","base","range","projection","near","texelSize","xViewport","yViewport","viewport","maxZ","minZAspect","depthProjection"],["randomSampler","depthSampler","normalSampler"],e,null,l.g.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,r,t,void 0,void 0,void 0,void 0,this._scene.getEngine().isWebGPU?1:0,(e,t)=>{e?t.push(s.e(5076).then(s.bind(s,45076))):t.push(s.e(5363).then(s.bind(s,85363)))}),this._ssaoPostProcess.autoClear=!1,this._ssaoPostProcess.onApply=e=>{if(this._scene.activeCamera){if(e.setArray3("sampleSphere",this._sampleSphere),e.setFloat("randTextureTiles",32),e.setFloat("samplesFactor",1/this.samples),e.setFloat("totalStrength",this.totalStrength),e.setFloat2("texelSize",1/this._ssaoPostProcess.width,1/this._ssaoPostProcess.height),e.setFloat("radius",this.radius),e.setFloat("maxZ",this.maxZ),e.setFloat("minZAspect",this.minZAspect),e.setFloat("base",this.base),e.setFloat("near",this._scene.activeCamera.minZ),this._scene.activeCamera.mode===h.i.PERSPECTIVE_CAMERA)e.setMatrix3x3("depthProjection",R.PERSPECTIVE_DEPTH_PROJECTION),e.setFloat("xViewport",Math.tan(this._scene.activeCamera.fov/2)*this._scene.getEngine().getAspectRatio(this._scene.activeCamera,!0)),e.setFloat("yViewport",Math.tan(this._scene.activeCamera.fov/2));else{const t=this._scene.getEngine().getRenderWidth()/2,s=this._scene.getEngine().getRenderHeight()/2,r=this._scene.activeCamera.orthoLeft??-t,i=this._scene.activeCamera.orthoRight??t,n=this._scene.activeCamera.orthoBottom??-s,o=this._scene.activeCamera.orthoTop??s;e.setMatrix3x3("depthProjection",R.ORTHO_DEPTH_PROJECTION),e.setFloat4("viewport",r,i,n,o)}e.setMatrix("projection",this._scene.getProjectionMatrix()),this._geometryBufferRenderer?(e.setTexture("depthSampler",this._geometryBufferRenderer.getGBuffer().textures[0]),e.setTexture("normalSampler",this._geometryBufferRenderer.getGBuffer().textures[1])):this._prePassRenderer&&(e.setTexture("depthSampler",this._prePassRenderer.getRenderTarget().textures[this._prePassRenderer.getIndex(5)]),e.setTexture("normalSampler",this._prePassRenderer.getRenderTarget().textures[this._prePassRenderer.getIndex(6)])),e.setTexture("randomSampler",this._randomTexture)}},this._ssaoPostProcess.samples=this.textureSamples,this._forceGeometryBuffer||(this._ssaoPostProcess._prePassEffectConfiguration=new P)}_createSSAOCombinePostProcess(e,t){this._ssaoCombinePostProcess=new c.w("ssaoCombine","ssaoCombine",[],["originalColor","viewport"],e,null,l.g.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,void 0,t,void 0,void 0,void 0,void 0,this._scene.getEngine().isWebGPU?1:0,(e,t)=>{e?t.push(s.e(8217).then(s.bind(s,68217))):t.push(s.e(4154).then(s.bind(s,74154)))}),this._ssaoCombinePostProcess.onApply=e=>{const t=this._scene.activeCamera.viewport;this.useViewportInCombineStage?e.setVector4("viewport",a.AA.Vector4[0].copyFromFloats(t.x,t.y,t.width,t.height)):e.setVector4("viewport",a.AA.Vector4[0].copyFromFloats(0,0,1,1)),e.setTextureFromPostProcessOutput("originalColor",this._originalColorPostProcess)},this._ssaoCombinePostProcess.autoClear=!1,this._ssaoCombinePostProcess.samples=this.textureSamples}_createRandomTexture(){const e=128,t=new Uint8Array(65536),s=a.I9.Zero();for(let e=0;e<t.length;)s.set((0,g.RandomRange)(0,1),(0,g.RandomRange)(0,1)).normalize().scaleInPlace(255),t[e++]=Math.floor(s.x),t[e++]=Math.floor(s.y),t[e++]=0,t[e++]=255;const r=S.I.CreateRGBATexture(t,e,e,this._scene,!1,!1,2);r.name="SSAORandomTexture",r.wrapU=l.g.WRAP_ADDRESSMODE,r.wrapV=l.g.WRAP_ADDRESSMODE,this._randomTexture=r}serialize(){const e=o.p.Serialize(this);return e.customType="SSAO2RenderingPipeline",e}static Parse(e,t,s){return o.p.Parse(()=>new R(e._name,t,e._ratio,void 0,e._forceGeometryBuffer,e._textureType),e,t,s)}}R.ORTHO_DEPTH_PROJECTION=[1,0,0,0,1,0,0,0,1],R.PERSPECTIVE_DEPTH_PROJECTION=[0,0,0,0,0,0,1,1,1],(0,r.Cg)([(0,n.lK)()],R.prototype,"totalStrength",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"maxZ",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"minZAspect",void 0),(0,r.Cg)([(0,n.lK)("epsilon")],R.prototype,"_epsilon",void 0),(0,r.Cg)([(0,n.lK)("samples")],R.prototype,"_samples",void 0),(0,r.Cg)([(0,n.lK)("textureSamples")],R.prototype,"_textureSamples",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"_forceGeometryBuffer",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"_ratio",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"_textureType",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"radius",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"base",void 0),(0,r.Cg)([(0,n.lK)("bypassBlur")],R.prototype,"_bypassBlur",void 0),(0,r.Cg)([(0,n.lK)("expensiveBlur")],R.prototype,"_expensiveBlur",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"bilateralSamples",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"bilateralSoften",void 0),(0,r.Cg)([(0,n.lK)()],R.prototype,"bilateralTolerance",void 0),(0,u.Y5)("BABYLON.SSAO2RenderingPipeline",R)},96041:(e,t,s)=>{s.d(t,{I:()=>i});var r=s(82781);class i extends r.g{constructor(e,t,s,i,n,o=!0,a=!1,h=3,l=0,c,p,_){super(null,n,!o,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c),this.format=i,this._engine&&(this._engine._caps.textureFloatLinearFiltering||1!==l||(h=1),this._engine._caps.textureHalfFloatLinearFiltering||2!==l||(h=1),this._texture=this._engine.createRawTexture(e,t,s,i,o,a,h,null,l,c??0,p??!1),this.wrapU=r.g.CLAMP_ADDRESSMODE,this.wrapV=r.g.CLAMP_ADDRESSMODE,this._waitingForData=!!_&&!e)}update(e){this._getEngine().updateRawTexture(this._texture,e,this._texture.format,this._texture.invertY,null,this._texture.type,this._texture._useSRGBBuffer),this._waitingForData=!1}clone(){if(!this._texture)return super.clone();const e=new i(null,this.getSize().width,this.getSize().height,this.format,this.getScene(),this._texture.generateMipMaps,this._invertY,this.samplingMode,this._texture.type,this._texture._creationFlags,this._useSRGBBuffer);return e._texture=this._texture,this._texture.incrementReferences(),e}isReady(){return super.isReady()&&!this._waitingForData}static CreateLuminanceTexture(e,t,s,r,n=!0,o=!1,a=3){return new i(e,t,s,1,r,n,o,a)}static CreateLuminanceAlphaTexture(e,t,s,r,n=!0,o=!1,a=3){return new i(e,t,s,2,r,n,o,a)}static CreateAlphaTexture(e,t,s,r,n=!0,o=!1,a=3){return new i(e,t,s,0,r,n,o,a)}static CreateRGBTexture(e,t,s,r,n=!0,o=!1,a=3,h=0,l=0,c=!1){return new i(e,t,s,4,r,n,o,a,h,l,c)}static CreateRGBATexture(e,t,s,r,n=!0,o=!1,a=3,h=0,l=0,c=!1,p=!1){return new i(e,t,s,5,r,n,o,a,h,l,c,p)}static CreateRGBAStorageTexture(e,t,s,r,n=!0,o=!1,a=3,h=0,l=!1){return new i(e,t,s,5,r,n,o,a,h,1,l)}static CreateRTexture(e,t,s,n,o=!0,a=!1,h=r.g.TRILINEAR_SAMPLINGMODE,l=1){return new i(e,t,s,6,n,o,a,h,l)}static CreateRStorageTexture(e,t,s,n,o=!0,a=!1,h=r.g.TRILINEAR_SAMPLINGMODE,l=1){return new i(e,t,s,6,n,o,a,h,l,1)}}}}]);