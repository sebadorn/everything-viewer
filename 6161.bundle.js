"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[6161],{86161:(e,r,a)=>{a.d(r,{KHR_materials_specular:()=>n});var s=a(98556),l=a(26041),t=a(37812);const o="KHR_materials_specular";class n{constructor(e){this.name=o,this.order=190,this._loader=e,this.enabled=this._loader.isExtensionUsed(o)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,r,a){return s.BT.LoadExtensionAsync(e,r,this.name,async(s,l)=>{const t=new Array;t.push(this._loader.loadMaterialPropertiesAsync(e,r,a)),t.push(this._loadSpecularPropertiesAsync(s,l,a));const o=this._loader._getOrCreateMaterialAdapter(a);if(l.extensions&&l.extensions.EXT_materials_specular_edge_color){l.extensions.EXT_materials_specular_edge_color.specularEdgeColorEnabled&&o.enableSpecularEdgeColor(!0)}return await Promise.all(t).then(()=>{})})}_loadSpecularPropertiesAsync(e,r,a){const s=this._loader._getOrCreateMaterialAdapter(a),t=new Array;return s.specularWeight=r.specularFactor??1,s.specularColor=void 0!==r.specularColorFactor?l.v9.FromArray(r.specularColorFactor):new l.v9(1,1,1),r.specularTexture&&(r.specularTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${e}/specularTexture`,r.specularTexture,e=>{e.name=`${a.name} (Specular)`,s.specularWeightTexture=e}))),r.specularColorTexture&&t.push(this._loader.loadTextureInfoAsync(`${e}/specularColorTexture`,r.specularColorTexture,e=>{e.name=`${a.name} (Specular Color)`,s.specularColorTexture=e})),Promise.all(t).then(()=>{})}}(0,t.Hg)(o),(0,t.Ye)(o,!0,e=>new n(e))}}]);