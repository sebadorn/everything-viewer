"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[2182],{39991:(e,s,t)=>{t.d(s,{KHR_draco_mesh_compression:()=>l});var o=t(87728),r=t(95616),i=t(45316),n=t(37812);const d="KHR_draco_mesh_compression";class l{constructor(e){this.name=d,this.useNormalizedFlagFromAccessor=!0,this._loader=e,this.enabled=o.Y.DefaultAvailable&&this._loader.isExtensionUsed(d)}dispose(){delete this.dracoDecoder,this._loader=null}_loadVertexDataAsync(e,s,t){return i.BT.LoadExtensionAsync(e,s,this.name,((n,d)=>{if(null!=s.mode&&4!==s.mode&&5!==s.mode)throw new Error(`${e}: Unsupported mode ${s.mode}`);const l={},a={},c=(e,o)=>{const r=d.attributes[e];if(null!=r&&(t._delayInfo=t._delayInfo||[],-1===t._delayInfo.indexOf(o)&&t._delayInfo.push(o),l[o]=r,this.useNormalizedFlagFromAccessor)){const t=i.l2.TryGet(this._loader.gltf.accessors,s.attributes[e]);t&&(a[o]=t.normalized||!1)}};c("POSITION",r.R.PositionKind),c("NORMAL",r.R.NormalKind),c("TANGENT",r.R.TangentKind),c("TEXCOORD_0",r.R.UVKind),c("TEXCOORD_1",r.R.UV2Kind),c("TEXCOORD_2",r.R.UV3Kind),c("TEXCOORD_3",r.R.UV4Kind),c("TEXCOORD_4",r.R.UV5Kind),c("TEXCOORD_5",r.R.UV6Kind),c("JOINTS_0",r.R.MatricesIndicesKind),c("WEIGHTS_0",r.R.MatricesWeightsKind),c("COLOR_0",r.R.ColorKind);const h=i.l2.Get(n,this._loader.gltf.bufferViews,d.bufferView);return h._dracoBabylonGeometry||(h._dracoBabylonGeometry=this._loader.loadBufferViewAsync(`/bufferViews/${h.index}`,h).then((r=>{const n=this.dracoDecoder||o.Y.Default,d=i.l2.TryGet(this._loader.gltf.accessors,s.attributes.POSITION),c=this._loader.parent.alwaysComputeBoundingBox||t.skeleton||!d?null:(0,i.dM)(d);return n._decodeMeshToGeometryForGltfAsync(t.name,this._loader.babylonScene,r,l,a,c).catch((s=>{throw new Error(`${e}: ${s.message}`)}))}))),h._dracoBabylonGeometry}))}}(0,n.Hg)(d),(0,n.Ye)(d,!0,(e=>new l(e)))},56608:(e,s,t)=>{t.d(s,{R:()=>o.R});var o=t(95616)},97573:(e,s,t)=>{t.d(s,{T:()=>o,h:()=>r});class o{constructor(e){this._pendingActions=new Array,this._workerInfos=e.map((e=>({workerPromise:Promise.resolve(e),idle:!0})))}dispose(){for(const e of this._workerInfos)e.workerPromise.then((e=>{e.terminate()}));this._workerInfos.length=0,this._pendingActions.length=0}push(e){this._executeOnIdleWorker(e)||this._pendingActions.push(e)}_executeOnIdleWorker(e){for(const s of this._workerInfos)if(s.idle)return this._execute(s,e),!0;return!1}_execute(e,s){e.idle=!1,e.workerPromise.then((t=>{s(t,(()=>{const s=this._pendingActions.shift();s?this._execute(e,s):e.idle=!0}))}))}}class r extends o{constructor(e,s,t=r.DefaultOptions){super([]),this._maxWorkers=e,this._createWorkerAsync=s,this._options=t}push(e){if(!this._executeOnIdleWorker(e))if(this._workerInfos.length<this._maxWorkers){const s={workerPromise:this._createWorkerAsync(),idle:!1};this._workerInfos.push(s),this._execute(s,e)}else this._pendingActions.push(e)}_execute(e,s){e.timeoutId&&(clearTimeout(e.timeoutId),delete e.timeoutId),super._execute(e,((t,o)=>{s(t,(()=>{o(),e.idle&&(e.timeoutId=setTimeout((()=>{e.workerPromise.then((e=>{e.terminate()}));const s=this._workerInfos.indexOf(e);-1!==s&&this._workerInfos.splice(s,1)}),this._options.idleTimeElapsedBeforeRelease))}))}))}}r.DefaultOptions={idleTimeElapsedBeforeRelease:1e3}}}]);