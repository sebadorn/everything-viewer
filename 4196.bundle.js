"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[4196],{4313:(e,t,s)=>{s.d(t,{EMLView:()=>i});var n=s(81094),r=s(39443),o=s(15287);class i extends o.P{constructor(e){super(e,"eml")}_buildActions(){return new r.e([new n.$({text:"Show Headers",onClick:()=>{this.nodeView.querySelector("iframe.content-res ")?.remove();this.nodeView.querySelector("iframe.content-no-res").style.display="none";this.nodeView.querySelector(".headers").style.display=""}}),new n.$({text:"Content (no external)",classes:"selected",onClick:()=>{this.nodeView.querySelector("iframe.content-res ")?.remove();this.nodeView.querySelector("iframe.content-no-res").style.display="";this.nodeView.querySelector(".headers").style.display="none"}}),new n.$({text:"Content (with external)",onClick:()=>{if(!window.confirm("Show the content and load its external resources?\nThis could pose a security risk.\n\nOnly agree if you trust the EML file."))return!1;this.nodeView.querySelector("iframe.content-res ")?.remove();this.nodeView.querySelector("iframe.content-no-res").style.display="none";this.nodeView.querySelector(".headers").style.display="none",this.parser.getBodyDOM({remove_external:!1},(e,t,s)=>{const n=document.createElement("iframe");n.className=`content-res eml-type-${s}`,n.setAttribute("sandbox",""),n.setAttribute("srcdoc",t.documentElement.outerHTML),this.nodeView.append(n)})}})]).render()}async load(){const e=document.createElement("iframe");e.className="content-no-res",e.setAttribute("sandbox","");const t=await this.parser.getBodyDOM({remove_external:!0}),s=await this.parser.getHeadersHTML();this.buildMetaNode();const n=this._buildActions();s.style.display="none",e.classList.add(`eml-type-${t.type}`),e.setAttribute("srcdoc",t.dom.documentElement.outerHTML),this.nodeView.append(n,s,e),this._openWindow()}}},39443:(e,t,s)=>{s.d(t,{e:()=>o});var n=s(19108),r=(s(81094),s(42109));class o extends n.u{constructor(e){super(),this._buttons=e}_toggle(e){this._buttons.forEach(e=>e._node.classList.remove("selected")),e._node.classList.add("selected")}render(){super.render(),this._node=r.UI.build('<div class="button-group"></div>');for(let e=0;e<this._buttons.length;e++){const t=this._buttons[e];t.on("click",()=>this._toggle(t)),this._node.append(t.render())}return this._node}}}}]);