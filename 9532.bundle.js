"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[9532],{49532:(e,t,r)=>{r.d(t,{oR:()=>p,tQ:()=>c,Wt:()=>_,ZU:()=>u});var n=r(79923),a=r(96125),o=r(26041),s=r(40136);const i=[{regex:new RegExp("^/nodes/\\d+/extensions/")}];class g{constructor(e,t){this._gltf=e,this._infoTree=t}convert(e){let t,r=this._gltf,n=this._infoTree;if(!e.startsWith("/"))throw new Error("Path must start with a /");const a=e.split("/");if(a.shift(),a[a.length-1].includes(".length")){const e=a[a.length-1].split(".");a.pop(),a.push(...e)}let o=!1;for(const s of a){const a="length"===s;if(a&&!n.__array__)throw new Error(`Path ${e} is invalid`);if(n.__ignoreObjectTree__&&(o=!0),n.__array__&&!a)n=n.__array__;else if(n=n[s],!n)throw new Error(`Path ${e} is invalid`);if(!o)if(void 0===r){if(!i.find((t=>t.regex.test(e))))throw new Error(`Path ${e} is invalid`)}else a||(r=r?.[s]);(n.__target__||a)&&(t=r)}return{object:t,info:n}}}function l(e,t,r,n){const a=m(e,t);return n?a[r][n]:a[r]}function m(e,t,r){return e._data?.[r?.fillMode??a.Y.MATERIAL_TriangleFillMode]?.babylonMaterial}function y(e,t){return{offset:{componentsCount:2,type:"Vector2",get:(r,a,o)=>{const s=l(r,o,e,t);return new n.I9(s?.uOffset,s?.vOffset)},getTarget:m,set:(r,n,a,o)=>{const s=l(n,o,e,t);s.uOffset=r.x,s.vOffset=r.y},getPropertyName:[()=>`${e}${t?"."+t:""}.uOffset`,()=>`${e}${t?"."+t:""}.vOffset`]},rotation:{type:"number",get:(r,n,a)=>l(r,a,e,t)?.wAng,getTarget:m,set:(r,n,a,o)=>l(n,o,e,t).wAng=r,getPropertyName:[()=>`${e}${t?"."+t:""}.wAng`]},scale:{componentsCount:2,type:"Vector2",get:(r,a,o)=>{const s=l(r,o,e,t);return new n.I9(s?.uScale,s?.vScale)},getTarget:m,set:(r,n,a,o)=>{const s=l(n,o,e,t);s.uScale=r.x,s.vScale=r.y},getPropertyName:[()=>`${e}${t?"."+t:""}.uScale`,()=>`${e}${t?"."+t:""}.vScale`]}}}const b={cameras:{__array__:{__target__:!0,orthographic:{xmag:{componentsCount:2,type:"Vector2",get:e=>new n.I9(e._babylonCamera?.orthoLeft??0,e._babylonCamera?.orthoRight??0),set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.orthoLeft=e.x,t._babylonCamera.orthoRight=e.y)},getTarget:e=>e,getPropertyName:[()=>"orthoLeft",()=>"orthoRight"]},ymag:{componentsCount:2,type:"Vector2",get:e=>new n.I9(e._babylonCamera?.orthoBottom??0,e._babylonCamera?.orthoTop??0),set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.orthoBottom=e.x,t._babylonCamera.orthoTop=e.y)},getTarget:e=>e,getPropertyName:[()=>"orthoBottom",()=>"orthoTop"]},zfar:{type:"number",get:e=>e._babylonCamera?.maxZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.maxZ=e)},getTarget:e=>e,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:e=>e._babylonCamera?.minZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.minZ=e)},getTarget:e=>e,getPropertyName:[()=>"minZ"]}},perspective:{aspectRatio:{type:"number",get:e=>e._babylonCamera?.getEngine().getAspectRatio(e._babylonCamera),getTarget:e=>e,getPropertyName:[()=>"aspectRatio"],isReadOnly:!0},yfov:{type:"number",get:e=>e._babylonCamera?.fov,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.fov=e)},getTarget:e=>e,getPropertyName:[()=>"fov"]},zfar:{type:"number",get:e=>e._babylonCamera?.maxZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.maxZ=e)},getTarget:e=>e,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:e=>e._babylonCamera?.minZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.minZ=e)},getTarget:e=>e,getPropertyName:[()=>"minZ"]}}}},nodes:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map((e=>e._babylonTransformNode)),getPropertyName:[()=>"length"]},__array__:{__target__:!0,translation:{type:"Vector3",get:e=>e._babylonTransformNode?.position,set:(e,t)=>t._babylonTransformNode?.position.copyFrom(e),getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"position"]},rotation:{type:"Quaternion",get:e=>e._babylonTransformNode?.rotationQuaternion,set:(e,t)=>t._babylonTransformNode?.rotationQuaternion?.copyFrom(e),getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"rotationQuaternion"]},scale:{type:"Vector3",get:e=>e._babylonTransformNode?.scaling,set:(e,t)=>t._babylonTransformNode?.scaling.copyFrom(e),getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"scaling"]},weights:{length:{type:"number",get:e=>e._numMorphTargets,getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},__array__:{__target__:!0,type:"number",get:(e,t)=>void 0!==t?e._primitiveBabylonMeshes?.[0].morphTargetManager?.getTarget(t).influence:void 0,getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},type:"number[]",get:(e,t)=>[0],getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},matrix:{type:"Matrix",get:e=>n.uq.Compose(e._babylonTransformNode?.scaling,e._babylonTransformNode?.rotationQuaternion,e._babylonTransformNode?.position),getTarget:e=>e._babylonTransformNode,isReadOnly:!0},globalMatrix:{type:"Matrix",get:e=>{const t=n.uq.Identity();let r=e.parent;for(;r&&r.parent;)r=r.parent;const a=e._babylonTransformNode?.position._isDirty||e._babylonTransformNode?.rotationQuaternion?._isDirty||e._babylonTransformNode?.scaling._isDirty;if(r){const n=r._babylonTransformNode?.computeWorldMatrix(!0).invert();n&&e._babylonTransformNode?.computeWorldMatrix(a)?.multiplyToRef(n,t)}else e._babylonTransformNode&&t.copyFrom(e._babylonTransformNode.computeWorldMatrix(a));return t},getTarget:e=>e._babylonTransformNode,isReadOnly:!0},extensions:{EXT_lights_ies:{multiplier:{type:"number",get:e=>e._babylonTransformNode?.getChildren((e=>e instanceof s.n),!0)[0]?.intensity,getTarget:e=>e._babylonTransformNode?.getChildren((e=>e instanceof s.n),!0)[0],set:(e,t)=>{if(t._babylonTransformNode){const r=t._babylonTransformNode.getChildren((e=>e instanceof s.n),!0)[0];r&&(r.intensity=e)}}},color:{type:"Color3",get:e=>e._babylonTransformNode?.getChildren((e=>e instanceof s.n),!0)[0]?.diffuse,getTarget:e=>e._babylonTransformNode?.getChildren((e=>e instanceof s.n),!0)[0],set:(e,t)=>{if(t._babylonTransformNode){const r=t._babylonTransformNode.getChildren((e=>e instanceof s.n),!0)[0];r&&(r.diffuse=e)}}}}}}},materials:{__array__:{__target__:!0,emissiveFactor:{type:"Color3",get:(e,t,r)=>m(e,t,r).emissiveColor,set:(e,t,r,n)=>m(t,r,n).emissiveColor.copyFrom(e),getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"emissiveColor"]},emissiveTexture:{extensions:{KHR_texture_transform:y("emissiveTexture")}},normalTexture:{scale:{type:"number",get:(e,t,r)=>l(e,r,"bumpTexture")?.level,set:(e,t,r,n)=>{const a=l(t,n,"bumpTexture");a&&(a.level=e)},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"level"]},extensions:{KHR_texture_transform:y("bumpTexture")}},occlusionTexture:{strength:{type:"number",get:(e,t,r)=>m(e,t,r).ambientTextureStrength,set:(e,t,r,n)=>{const a=m(t,r,n);a&&(a.ambientTextureStrength=e)},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"ambientTextureStrength"]},extensions:{KHR_texture_transform:y("ambientTexture")}},pbrMetallicRoughness:{baseColorFactor:{type:"Color4",get:(e,t,r)=>{const n=m(e,t,r);return o.ov.FromColor3(n.albedoColor,n.alpha)},set:(e,t,r,n)=>{const a=m(t,r,n);a.albedoColor.set(e.r,e.g,e.b),a.alpha=e.a},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"albedoColor",()=>"alpha"]},baseColorTexture:{extensions:{KHR_texture_transform:y("albedoTexture")}},metallicFactor:{type:"number",get:(e,t,r)=>m(e,t,r).metallic,set:(e,t,r,n)=>{const a=m(t,r,n);a&&(a.metallic=e)},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"metallic"]},roughnessFactor:{type:"number",get:(e,t,r)=>m(e,t,r).roughness,set:(e,t,r,n)=>{const a=m(t,r,n);a&&(a.roughness=e)},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"roughness"]},metallicRoughnessTexture:{extensions:{KHR_texture_transform:y("metallicTexture")}}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:{type:"number",get:(e,t,r)=>m(e,t,r).anisotropy.intensity,set:(e,t,r,n)=>{m(t,r,n).anisotropy.intensity=e},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"anisotropy.intensity"]},anisotropyRotation:{type:"number",get:(e,t,r)=>m(e,t,r).anisotropy.angle,set:(e,t,r,n)=>{m(t,r,n).anisotropy.angle=e},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"anisotropy.angle"]},anisotropyTexture:{extensions:{KHR_texture_transform:y("anisotropy","texture")}}},KHR_materials_clearcoat:{clearcoatFactor:{type:"number",get:(e,t,r)=>m(e,t,r).clearCoat.intensity,set:(e,t,r,n)=>{m(t,r,n).clearCoat.intensity=e},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"clearCoat.intensity"]},clearcoatRoughnessFactor:{type:"number",get:(e,t,r)=>m(e,t,r).clearCoat.roughness,set:(e,t,r,n)=>{m(t,r,n).clearCoat.roughness=e},getTarget:(e,t,r)=>m(e,t,r),getPropertyName:[()=>"clearCoat.roughness"]},clearcoatTexture:{extensions:{KHR_texture_transform:y("clearCoat","texture")}},clearcoatNormalTexture:{scale:{type:"number",get:(e,t,r)=>m(e,t,r).clearCoat.bumpTexture?.level,getTarget:m,set:(e,t,r,n)=>m(t,r,n).clearCoat.bumpTexture.level=e},extensions:{KHR_texture_transform:y("clearCoat","bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:y("clearCoat","textureRoughness")}}},KHR_materials_dispersion:{dispersion:{type:"number",get:(e,t,r)=>m(e,t,r).subSurface.dispersion,getTarget:m,set:(e,t,r,n)=>m(t,r,n).subSurface.dispersion=e}},KHR_materials_emissive_strength:{emissiveStrength:{type:"number",get:(e,t,r)=>m(e,t,r).emissiveIntensity,getTarget:m,set:(e,t,r,n)=>m(t,r,n).emissiveIntensity=e}},KHR_materials_ior:{ior:{type:"number",get:(e,t,r)=>m(e,t,r).indexOfRefraction,getTarget:m,set:(e,t,r,n)=>m(t,r,n).indexOfRefraction=e}},KHR_materials_iridescence:{iridescenceFactor:{type:"number",get:(e,t,r)=>m(e,t,r).iridescence.intensity,getTarget:m,set:(e,t,r,n)=>m(t,r,n).iridescence.intensity=e},iridescenceIor:{type:"number",get:(e,t,r)=>m(e,t,r).iridescence.indexOfRefraction,getTarget:m,set:(e,t,r,n)=>m(t,r,n).iridescence.indexOfRefraction=e},iridescenceTexture:{extensions:{KHR_texture_transform:y("iridescence","texture")}},iridescenceThicknessMaximum:{type:"number",get:(e,t,r)=>m(e,t,r).iridescence.maximumThickness,getTarget:m,set:(e,t,r,n)=>m(t,r,n).iridescence.maximumThickness=e},iridescenceThicknessMinimum:{type:"number",get:(e,t,r)=>m(e,t,r).iridescence.minimumThickness,getTarget:m,set:(e,t,r,n)=>m(t,r,n).iridescence.minimumThickness=e},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:y("iridescence","thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:{type:"Color3",get:(e,t,r)=>m(e,t,r).sheen.color,getTarget:m,set:(e,t,r,n)=>m(t,r,n).sheen.color.copyFrom(e)},sheenColorTexture:{extensions:{KHR_texture_transform:y("sheen","texture")}},sheenRoughnessFactor:{type:"number",get:(e,t,r)=>m(e,t,r).sheen.intensity,getTarget:m,set:(e,t,r,n)=>m(t,r,n).sheen.intensity=e},sheenRoughnessTexture:{extensions:{KHR_texture_transform:y("sheen","thicknessTexture")}}},KHR_materials_specular:{specularFactor:{type:"number",get:(e,t,r)=>m(e,t,r).metallicF0Factor,getTarget:m,set:(e,t,r,n)=>m(t,r,n).metallicF0Factor=e,getPropertyName:[()=>"metallicF0Factor"]},specularColorFactor:{type:"Color3",get:(e,t,r)=>m(e,t,r).metallicReflectanceColor,getTarget:m,set:(e,t,r,n)=>m(t,r,n).metallicReflectanceColor.copyFrom(e),getPropertyName:[()=>"metallicReflectanceColor"]},specularTexture:{extensions:{KHR_texture_transform:y("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:y("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:{type:"number",get:(e,t,r)=>m(e,t,r).subSurface.refractionIntensity,getTarget:m,set:(e,t,r,n)=>m(t,r,n).subSurface.refractionIntensity=e,getPropertyName:[()=>"subSurface.refractionIntensity"]},transmissionTexture:{extensions:{KHR_texture_transform:y("subSurface","refractionIntensityTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:{type:"number",get:(e,t,r)=>m(e,t,r).subSurface.translucencyIntensity,getTarget:m,set:(e,t,r,n)=>m(t,r,n).subSurface.translucencyIntensity=e},diffuseTransmissionTexture:{extensions:{KHR_texture_transform:y("subSurface","translucencyIntensityTexture")}},diffuseTransmissionColorFactor:{type:"Color3",get:(e,t,r)=>m(e,t,r).subSurface.translucencyColor,getTarget:m,set:(e,t,r,n)=>e&&m(t,r,n).subSurface.translucencyColor?.copyFrom(e)},diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:y("subSurface","translucencyColorTexture")}}},KHR_materials_volume:{attenuationColor:{type:"Color3",get:(e,t,r)=>m(e,t,r).subSurface.tintColor,getTarget:m,set:(e,t,r,n)=>m(t,r,n).subSurface.tintColor.copyFrom(e)},attenuationDistance:{type:"number",get:(e,t,r)=>m(e,t,r).subSurface.tintColorAtDistance,getTarget:m,set:(e,t,r,n)=>m(t,r,n).subSurface.tintColorAtDistance=e},thicknessFactor:{type:"number",get:(e,t,r)=>m(e,t,r).subSurface.maximumThickness,getTarget:m,set:(e,t,r,n)=>m(t,r,n).subSurface.maximumThickness=e},thicknessTexture:{extensions:{KHR_texture_transform:y("subSurface","thicknessTexture")}}}}}},extensions:{KHR_lights_punctual:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map((e=>e._babylonLight)),getPropertyName:[e=>"length"]},__array__:{__target__:!0,color:{type:"Color3",get:e=>e._babylonLight?.diffuse,set:(e,t)=>t._babylonLight?.diffuse.copyFrom(e),getTarget:e=>e._babylonLight,getPropertyName:[e=>"diffuse"]},intensity:{type:"number",get:e=>e._babylonLight?.intensity,set:(e,t)=>t._babylonLight?t._babylonLight.intensity=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"intensity"]},range:{type:"number",get:e=>e._babylonLight?.range,set:(e,t)=>t._babylonLight?t._babylonLight.range=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"range"]},spot:{innerConeAngle:{type:"number",get:e=>e._babylonLight?.innerAngle,set:(e,t)=>t._babylonLight?t._babylonLight.innerAngle=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"innerConeAngle"]},outerConeAngle:{type:"number",get:e=>e._babylonLight?.angle,set:(e,t)=>t._babylonLight?t._babylonLight.angle=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"outerConeAngle"]}}}}},EXT_lights_ies:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map((e=>e._babylonLight)),getPropertyName:[e=>"length"]}}},EXT_lights_image_based:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map((e=>e._babylonTexture)),getPropertyName:[e=>"length"]},__array__:{__target__:!0,intensity:{type:"number",get:e=>e._babylonTexture?.level,set:(e,t)=>{t._babylonTexture&&(t._babylonTexture.level=e)},getTarget:e=>e._babylonTexture},rotation:{type:"Quaternion",get:e=>e._babylonTexture&&n.PT.FromRotationMatrix(e._babylonTexture?.getReflectionTextureMatrix()),set:(e,t)=>{t._babylonTexture&&(t._babylonTexture.getScene()?.useRightHandedSystem||(e=n.PT.Inverse(e)),n.uq.FromQuaternionToRef(e,t._babylonTexture.getReflectionTextureMatrix()))},getTarget:e=>e._babylonTexture}}}}},animations:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map((e=>e._babylonAnimationGroup)),getPropertyName:[()=>"length"]},__array__:{}},meshes:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map((e=>e.primitives[0]._instanceData?.babylonSourceMesh)),getPropertyName:[()=>"length"]},__array__:{}}};function _(e){return new g(e,b)}function c(e){const t=e.split("/").map((e=>e.replace(/{}/g,"__array__")));let r=b;for(const e of t)e&&(r=r[e]);if(r&&r.type&&r.get)return r}function u(e,t){const r=e.split("/").map((e=>e.replace(/{}/g,"__array__")));let n=b;for(const e of r)e&&(n=n[e]);n&&n.type&&n.get&&(n.interpolation=t)}function p(e,t){const r=e.split("/").map((e=>e.replace(/{}/g,"__array__")));let n=b;for(const e of r)if(e){if(!n[e]){if("?"===e){n.__ignoreObjectTree__=!0;continue}n[e]={},"__array__"===e&&(n[e].__target__=!0)}n=n[e]}Object.assign(n,t)}}}]);