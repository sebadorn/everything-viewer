"use strict";(self.webpackChunkeverything_viewer=self.webpackChunkeverything_viewer||[]).push([[3298],{30917:(e,s,r)=>{r.d(s,{EXT_materials_diffuse_roughness:()=>a});var n=r(23975),o=r(98556),t=r(37812),i=r(96125);const u="EXT_materials_diffuse_roughness";class a{constructor(e){this.name=u,this.order=190,this._loader=e,this.enabled=this._loader.isExtensionUsed(u)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,s,r){return o.BT.LoadExtensionAsync(e,s,this.name,async(n,o)=>{const t=new Array;return t.push(this._loader.loadMaterialPropertiesAsync(e,s,r)),t.push(this._loadDiffuseRoughnessPropertiesAsync(n,o,r)),await Promise.all(t).then(()=>{})})}_loadDiffuseRoughnessPropertiesAsync(e,s,r){if(!(r instanceof n.Y))throw new Error(`${e}: Material type not supported`);const o=new Array;return r.brdf.baseDiffuseModel=i.Y.MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR,null!=s.diffuseRoughnessFactor?r.baseDiffuseRoughness=s.diffuseRoughnessFactor:r.baseDiffuseRoughness=0,s.diffuseRoughnessTexture&&o.push(this._loader.loadTextureInfoAsync(`${e}/diffuseRoughnessTexture`,s.diffuseRoughnessTexture,e=>{e.name=`${r.name} (Diffuse Roughness)`,r.baseDiffuseRoughnessTexture=e})),Promise.all(o).then(()=>{})}}(0,t.Hg)(u),(0,t.Ye)(u,!0,e=>new a(e))}}]);